<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head>
    <title th:text="${usuario.idUsuario == null ? 'Nuevo Usuario' : 'Editar Usuario'}">Registro de Usuario</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/estilos.css}">
    <link rel="stylesheet" th:href="@{/animac.css}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

    
</head>
<body>

    <div class="container fondo-difuminado text-center mt-5">
        <div class="card card-authentication1 mx-auto">
            <div class="card-body">
                <div class="text-center">
                    <img th:src="@{/images/logosinfondo_SGT-naranja1.png}" alt="Logo Turnos" width="100">
                </div>
                <div class="card-title text-uppercase text-center py-3" th:text="${usuario.idUsuario == null ? 'Nuevo Usuario' : 'Editar Usuario'}"></div>
                
                <form th:action="@{/usuarios}" th:object="${usuario}" method="post" class="needs-validation" novalidate>
                                       
                    <div class="form-group">
                        <label for="idUsuario">Número de documento</label>
                        <div class="position-relative has-icon-right">
                            <input type="text" id="idUsuario" th:field="*{idUsuario}" 
                                   class="form-control input-shadow" placeholder="Ingrese número de documento"
                                   th:readonly="${usuario.idUsuario != null}" required>
                            <div class="form-control-position">
                                <i class="fas fa-id-card"></i>
                            </div>
                            <div class="invalid-feedback">Por favor ingrese el número de documento</div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="primerNombre">Primer Nombre</label>
                        <div class="position-relative has-icon-right">
                            <input type="text" id="primerNombre" th:field="*{primerNombre}" 
                                   class="form-control input-shadow" placeholder="Ingrese Primer Nombre" required>
                            <div class="form-control-position">
                                <i class="fas fa-user"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="segundoNombre">Segundo Nombre</label>
                        <div class="position-relative has-icon-right">
                            <input type="text" id="segundoNombre" th:field="*{segundoNombre}" 
                                   class="form-control input-shadow" placeholder="Ingrese Segundo Nombre">
                            <div class="form-control-position">
                                <i class="fas fa-user"></i>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="primerApellido">Primer Apellido</label>
                        <div class="position-relative has-icon-right">
                            <input type="text" id="primerApellido" th:field="*{primerApellido}" 
                                   class="form-control input-shadow" placeholder="Ingrese Primer Apellido" required>
                            <div class="form-control-position">
                                <i class="fas fa-user"></i>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="segundoApellido">Segundo Apellido</label>
                        <div class="position-relative has-icon-right">
                            <input type="text" id="segundoApellido" th:field="*{segundoApellido}" 
                                   class="form-control input-shadow" placeholder="Ingrese Segundo Apellido">
                            <div class="form-control-position">
                                <i class="fas fa-user"></i>
                            </div>
                        </div>
                    </div>

                   <div class="form-group">
        <label for="rol">Cargo</label>
        <div class="position-relative has-icon-right">
            <select id="rol" th:field="*{rol}" class="form-control input-shadow" required>
    <option value="">Seleccione un cargo</option>
    <option th:each="r : ${roles}" th:value="${r.idRol}" th:text="${r.rol}"></option>
           </select>
            <div class="form-control-position">
                <i class="fas fa-user-tag"></i>
            </div>
        </div>
    </div>

                    <div class="form-group">
                        <label for="correo">Correo</label>
                        <div class="position-relative has-icon-right">
                            <input type="email" id="correo" th:field="*{correo}" 
                                   class="form-control input-shadow" placeholder="Ingrese el correo" required>
                            <div class="form-control-position">
                                <i class="fas fa-envelope"></i>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="contrasena">Contraseña</label>
                        <div class="position-relative has-icon-right">
                            <input type="password" id="contrasena" th:field="*{contrasena}" 
                                   class="form-control input-shadow" placeholder="Ingrese Contraseña"
                                   th:required="${usuario.idUsuario == null}">
                            <div class="form-control-position">
                                <i class="fas fa-lock"></i>
                            </div>
                        </div>
                    </div>

                    <div class="form-group centered-checkbox mt-3" th:if="${usuario.idUsuario == null}">
                        <div class="icheck-material-white">
                            <input type="checkbox" id="user-checkbox" name="terminos" value="aceptado" required>
                            <label for="user-checkbox">Acepto los términos y condiciones</label>
                        </div>
                    </div>
                    
                    <button type="submit" class="btn btn-light d-block mx-auto mt-3" 
                            th:text="${usuario.idUsuario == null ? 'Registrarse' : 'Actualizar'}">Registrarse</button>
                    <a th:href="@{/usuarios}" class="btn btn-secondary d-block mx-auto mt-2">Cancelar</a>
                    
                    <a th:href="@{/dashboard_admin}" class="btn btn-secondary d-block mx-auto mt-2">Volver al Dashboard</a>
                </form>
            </div>
        </div>
    </div>

    <script>
        (() => {
            'use strict'
            const forms = document.querySelectorAll('.needs-validation')
            Array.from(forms).forEach(form => {
                form.addEventListener('submit', event => {
                    if (!form.checkValidity()) {
                        event.preventDefault()
                        event.stopPropagation()
                    }
                    form.classList.add('was-validated')
                }, false)
            })
        })()
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>